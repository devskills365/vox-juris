{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto mt-10">
  <h2 class="text-2xl font-bold mb-5">Inscription</h2>
  <form method="POST" enctype="multipart/form-data">
    <div class="mb-4">
      <label class="block text-gray-700">Nom</label>
      <input type="text" name="name" class="w-full px-3 py-2 border rounded" required>
    </div>
    <div class="mb-4">
      <label class="block text-gray-700">Email</label>
      <input type="email" name="email" class="w-full px-3 py-2 border rounded" required>
    </div>
    <div class="mb-4">
      <label class="block text-gray-700">Mot de passe</label>
      <input type="password" name="password" class="w-full px-3 py-2 border rounded" required>
    </div>
    <div class="mb-4">
      <label class="block text-gray-700">RÃ´le</label>
      <select name="role" class="w-full px-3 py-2 border rounded" required>
        <option value="citizen">Citoyen</option>
        <option value="professional">Professionnel</option>
      </select>
    </div>
    <div class="mb-4 hidden" id="professional_fields">
      <label class="block text-gray-700">Expertise</label>
      <input type="text" name="expertise" class="w-full px-3 py-2 border rounded">
      <label class="block text-gray-700 mt-2">Domaines d'intervention</label>
      <select name="expertise_domains" multiple class="w-full px-3 py-2 border rounded" size="5">
        {% for domain in expertise_domains %}
          <option value="{{ domain }}">{{ domain }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-4">
      <label class="block text-gray-700">Localisation</label>
      <input type="text" name="location" class="w-full px-3 py-2 border rounded">
    </div>
    <div class="mb-4">
      <label class="block text-gray-700">Photo de profil</label>
      <input type="file" name="profile_picture" class="w-full px-3 py-2 border rounded" accept="image/*">
    </div>
    <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">S'inscrire</button>
  </form>
</div>

<script>
  const roleSelect = document.querySelector('select[name="role"]');
  const professionalFields = document.querySelector('#professional_fields');
  roleSelect.addEventListener('change', () => {
    professionalFields.classList.toggle('hidden', roleSelect.value !== 'professional');
  });
</script>
{% endblock %}